{"ast":null,"code":"import { useSafeLayoutEffect } from \"@chakra-ui/hooks\";\nimport { createContext, isBrowser, __DEV__ } from \"@chakra-ui/utils\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { usePortalManager } from \"./portal-manager\";\nvar [PortalContextProvider, usePortalContext] = createContext({\n  strict: false,\n  name: \"PortalContext\"\n});\n/**\n * Portal\n *\n * Declarative component used to render children into a DOM node\n * that exists outside the DOM hierarchy of the parent component.\n * There is no document link yet\n * @see Docs https://chakra-ui.com/docs/overlay/portal\n */\n\nexport var Portal = props => {\n  var {\n    onMount,\n    onUnmount,\n    children,\n    getContainer\n  } = props;\n  /**\n   * Generate the portal's dom node. We'll wrap the children\n   * in this dom node before mounting it.\n   */\n\n  var [portal] = React.useState(() => {\n    if (isBrowser) {\n      var div = document.createElement(\"div\");\n      div.className = \"chakra-portal\";\n      return div;\n    } // for ssr\n\n\n    return null;\n  });\n  /**\n   * This portal might be nested in another portal.\n   * Let's read from the portal context to check this.\n   */\n\n  var parentPortal = usePortalContext();\n  /**\n   * If there's a PortalManager rendered, let's read from it.\n   * We use the portal manager to manage multiple portals\n   */\n\n  var manager = usePortalManager();\n  var append = React.useCallback(container => {\n    // if user specified a mount node, do nothing.\n    if (!portal || !container) return; // else, simply append component to the portal node\n\n    container.appendChild(portal);\n  }, [portal]);\n  useSafeLayoutEffect(() => {\n    var _ref, _ref2; // get the custom container from the container prop\n\n\n    var customContainer = getContainer == null ? void 0 : getContainer();\n    /**\n     * We need to know where to mount this portal, we have 4 options:\n     * - If a mountRef is specified, we'll use that as the container\n     * - If portal is nested, use the parent portal node as container.\n     * - If it is not nested, use the manager's node as container\n     * - else use document.body as containers\n     */\n\n    var container = (_ref = (_ref2 = customContainer != null ? customContainer : parentPortal) != null ? _ref2 : manager == null ? void 0 : manager.node) != null ? _ref : document.body;\n    /**\n     * Append portal node to the computed container\n     */\n\n    append(container);\n    onMount == null ? void 0 : onMount();\n    return () => {\n      onUnmount == null ? void 0 : onUnmount();\n      if (!portal) return;\n\n      if (container != null && container.contains(portal)) {\n        container == null ? void 0 : container.removeChild(portal);\n      }\n    };\n  }, [getContainer, portal, parentPortal, onMount, onUnmount, manager == null ? void 0 : manager.node, append]);\n  var portalChildren = manager != null && manager.zIndex ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chakra-portal-zIndex\",\n    style: {\n      position: \"absolute\",\n      zIndex: manager.zIndex,\n      width: \"100%\"\n    }\n  }, children) : children;\n\n  if (!portal) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, portalChildren);\n  }\n\n  return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(PortalContextProvider, {\n    value: portal\n  }, portalChildren), portal);\n};\n\nif (__DEV__) {\n  Portal.displayName = \"Portal\";\n}","map":{"version":3,"sources":["../../src/portal.tsx"],"names":["createContext","strict","name","Portal","props","getContainer","div","document","parentPortal","usePortalContext","manager","usePortalManager","append","container","useSafeLayoutEffect","customContainer","onMount","onUnmount","portalChildren","position","zIndex","width","portal"],"mappings":"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","sourcesContent":["import { useSafeLayoutEffect } from \"@chakra-ui/hooks\"\nimport { createContext, isBrowser, __DEV__ } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\nimport * as ReactDOM from \"react-dom\"\nimport { usePortalManager } from \"./portal-manager\"\n\ntype PortalContext = HTMLDivElement | null\n\nconst [PortalContextProvider, usePortalContext] = createContext<PortalContext>({\n  strict: false,\n  name: \"PortalContext\",\n})\n\nexport interface PortalProps {\n  /**\n   * Function called when the portal mounts\n   */\n  onMount?(): void\n  /**\n   * Function called when the portal unmounts\n   */\n  onUnmount?(): void\n  /**\n   * Function that will be called to get the parent element\n   * that the portal will be attached to.\n   */\n  getContainer?: () => HTMLElement | null\n  /**\n   * The content or node you'll like to portal\n   */\n  children?: React.ReactNode\n}\n\n/**\n * Portal\n *\n * Declarative component used to render children into a DOM node\n * that exists outside the DOM hierarchy of the parent component.\n * There is no document link yet\n * @see Docs https://chakra-ui.com/docs/overlay/portal\n */\nexport const Portal: React.FC<PortalProps> = (props) => {\n  const { onMount, onUnmount, children, getContainer } = props\n\n  /**\n   * Generate the portal's dom node. We'll wrap the children\n   * in this dom node before mounting it.\n   */\n  const [portal] = React.useState(() => {\n    if (isBrowser) {\n      const div = document.createElement(\"div\")\n      div.className = \"chakra-portal\"\n      return div\n    }\n    // for ssr\n    return null\n  })\n\n  /**\n   * This portal might be nested in another portal.\n   * Let's read from the portal context to check this.\n   */\n  const parentPortal = usePortalContext()\n\n  /**\n   * If there's a PortalManager rendered, let's read from it.\n   * We use the portal manager to manage multiple portals\n   */\n  const manager = usePortalManager()\n\n  const append = React.useCallback(\n    (container: HTMLElement | null) => {\n      // if user specified a mount node, do nothing.\n      if (!portal || !container) return\n\n      // else, simply append component to the portal node\n      container.appendChild(portal)\n    },\n    [portal],\n  )\n\n  useSafeLayoutEffect(() => {\n    // get the custom container from the container prop\n    const customContainer = getContainer?.()\n\n    /**\n     * We need to know where to mount this portal, we have 4 options:\n     * - If a mountRef is specified, we'll use that as the container\n     * - If portal is nested, use the parent portal node as container.\n     * - If it is not nested, use the manager's node as container\n     * - else use document.body as containers\n     */\n    const container =\n      customContainer ?? parentPortal ?? manager?.node ?? document.body\n\n    /**\n     * Append portal node to the computed container\n     */\n    append(container)\n\n    onMount?.()\n\n    return () => {\n      onUnmount?.()\n\n      if (!portal) return\n\n      if (container?.contains(portal)) {\n        container?.removeChild(portal)\n      }\n    }\n  }, [\n    getContainer,\n    portal,\n    parentPortal,\n    onMount,\n    onUnmount,\n    manager?.node,\n    append,\n  ])\n\n  const portalChildren = manager?.zIndex ? (\n    <div\n      className=\"chakra-portal-zIndex\"\n      style={{\n        position: \"absolute\",\n        zIndex: manager.zIndex,\n        width: \"100%\",\n      }}\n    >\n      {children}\n    </div>\n  ) : (\n    children\n  )\n\n  if (!portal) {\n    return <>{portalChildren}</>\n  }\n\n  return ReactDOM.createPortal(\n    <PortalContextProvider value={portal}>\n      {portalChildren}\n    </PortalContextProvider>,\n    portal,\n  )\n}\n\nif (__DEV__) {\n  Portal.displayName = \"Portal\"\n}\n"]},"metadata":{},"sourceType":"module"}